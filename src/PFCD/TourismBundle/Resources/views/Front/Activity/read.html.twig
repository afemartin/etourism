{% extends 'PFCDTourismBundle:Front:layout.html.twig' %}

{% block title %}{{ 'Activity'|trans }} {{ activity.title }}{% endblock%}

{% block stylesheets %}
{{ parent() }}
<link href="{{ asset('css/fancybox-1.3.4.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% block body %}
<div class="info-container row">
    <div class="info-title span9">
        <h1>{{ activity.title }}</h1>
    </div>
    <div class="info-desc span9">
        {% if activity.video %}
        <div class="info-video pull-right">
            {{ activity.video|raw }}
        </div>
        {% endif %}
        <p>{{ activity.shortDesc }}</p>
        {{ activity.fullDesc|raw }}
    </div>
</div>

{% if activity.images %}
<h2>{{ 'front.activity.read.images'|trans }}</h2>
<div class="info-carrousel row">
{% for image in activity.images %}
    <a class="info-image thumbnail span" href="{{ asset(image) }}" rel="images">
        <img alt="{{ activity.title }}" src="{{ image|apply_filter('thumbnail') }}" />
    </a>
{% endfor %}
</div>
{% endif %}

<h2>{{ 'front.activity.read.geolocation'|trans }}</h2>
{% if activity.geolocation %}
<div class="info-map row">
    <div class="thumbnail span9">
        <div id="map_canvas"></div>
    </div>
</div>
{% endif %}

{% endblock %}

{% block javascripts %}
{{ parent() }}
<script type="text/javascript">
    $('#navbar-tab-activity').addClass("active");
</script>

<script type="text/javascript" src="{{ asset('js/fancybox-1.3.4.min.js') }}"></script>
<script type="text/javascript">
    $("a.info-image").fancybox();
</script>

{% if activity.geolocation %}
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key={{ google_maps_key }}&sensor=false"></script>
<script type="text/javascript">
    window.onload = function() {
        var location = new google.maps.LatLng({{ activity.geolocation}});
        var myOptions = {
            center: location,
            zoom: 10,
            scrollwheel: false,
            scaleControl: true,
            mapTypeId: google.maps.MapTypeId.HYBRID
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var title = "{{ activity.title }}";
        var marker = new google.maps.Marker({ position: location, map: map, title: title });

        var infowindow = new google.maps.InfoWindow({ content: title });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, marker);
        });
    }
</script>
{% endif %}
{% endblock %}